<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Evert&#39;s Blog</title>
  
  <subtitle>Projects and Tutorials</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://lunasqu.ee/blog/"/>
  <updated>2018-02-03T12:13:59.676Z</updated>
  <id>https://lunasqu.ee/blog/</id>
  
  <author>
    <name>Evert</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Giving a shot at making a game using Godot Engine 3.0</title>
    <link href="https://lunasqu.ee/blog/2018/02/03/Giving-a-shot-at-making-a-game-using-Godot-Engine-3-0/"/>
    <id>https://lunasqu.ee/blog/2018/02/03/Giving-a-shot-at-making-a-game-using-Godot-Engine-3-0/</id>
    <published>2018-02-03T10:43:10.000Z</published>
    <updated>2018-02-03T12:13:59.676Z</updated>
    
    <content type="html"><![CDATA[<p>Hello!<br>In the past week, I’ve been working on a simple 3D game using <a href="https://godotengine.org/" target="_blank" rel="noopener">Godot Engine 3.0</a> (<em>go-doh</em>). In this article, I will show off some of the features and discuss how it all works. Here’s a quick demo of the gameplay:</p><p><video width="640" height="420" controls><br>  <source src="https://i.lunasqu.ee/blog/godot_project-2018-02-02_12.32.45.webm" type="video/webm"><br></video></p><h1 id="Mechanics"><a href="#Mechanics" class="headerlink" title="Mechanics"></a>Mechanics</h1><h2 id="Block-breaking"><a href="#Block-breaking" class="headerlink" title="Block breaking"></a>Block breaking</h2><p>Blocks can be broken by just clicking on a tile of the chunk. The speed of the breaking and the damage dealt to the tile depend on the current pickaxe. Pickaxes can be upgraded in the Shop GUI. Pickaxes also have a durability value, which will always be kept at maximum when you’re on the surface. The current pickaxe along with it’s durability is displayed in the bottom right corner of the screen. When your pickaxe “breaks”, you will stop mining and you won’t be able to start mining until you repair it or return to the surface.</p><h2 id="Bombing"><a href="#Bombing" class="headerlink" title="Bombing"></a>Bombing</h2><p>Blocks can also be broken using bombs. By placing a bomb, it takes approximately 3 seconds to detonate and it <strong>damages</strong> blocks in a 4 tile radius. Tougher blocks located deeper in the mine wont be broken by a bomb, instead made softer and thus they will take less time to mine with a pickaxe. When a bomb blows up tiles, you won’t get them in your inventory.</p><h2 id="Shop"><a href="#Shop" class="headerlink" title="Shop"></a>Shop</h2><p>In the shop GUI, you can sell your mined blocks for money or buy items like torches, bombs and better pickaxes. Money can only be earned by selling the blocks you’ve mined.</p><h2 id="Minerals"><a href="#Minerals" class="headerlink" title="Minerals"></a>Minerals</h2><p>This is the list of minerals currently generated in the chunk and their yield when sold:</p><ul><li>Copper - $15</li><li>Iron - $20</li><li>Silver - $50</li><li>Gold - $100</li><li>Amethyst - $250</li><li>Emerald - $300</li><li>Sapphire - $400</li><li>Ruby - $500</li><li>Diamond  - $1000</li><li>Flawless Diamond - $2500 (rarest)</li></ul><p>Note that all of these are not guaranteed to generate. It depends on the random seed and the y value.</p><h1 id="Scenes"><a href="#Scenes" class="headerlink" title="Scenes"></a>Scenes</h1><p>Godot uses Scenes, which can be easily instanced. The following image is the Godot editor, in it I have opened the root scene, which will be the point where the game runs.<br><img src="https://i.lunasqu.ee/blog/root_scene.png" alt="Root Scene"><br>On the right, you can see the scene tree.<br><img src="https://i.lunasqu.ee/blog/instances.png" alt="Instances"></p><ul><li><a href="http://docs.godotengine.org/en/3.0/classes/class_spatial.html" target="_blank" rel="noopener"><strong>Root</strong></a> - This is the first node in the scene, containing everything.</li><li><a href="http://docs.godotengine.org/en/3.0/classes/class_worldenvironment.html" target="_blank" rel="noopener"><strong>WorldEnvironment</strong></a> - Controls the overall look of the scene. I have configured it to give me a completely black scene without a background.</li><li>All of my other custom scenes follow these.</li></ul><h2 id="The-Chunk"><a href="#The-Chunk" class="headerlink" title="The Chunk"></a>The Chunk</h2><p><video width="640" height="420" controls><br>  <source src="https://i.lunasqu.ee/blog/godot_project-2018-02-03_14.12.37.webm" type="video/webm"><br></video><br>The Chunk is a <a href="http://docs.godotengine.org/en/3.0/classes/class_meshinstance.html" target="_blank" rel="noopener">MeshInstance</a> which I use to generate a random mine with. I’ve attached a script to this node which generates a mesh and assigns it to the MeshInstance.<br>Using <a href="http://docs.godotengine.org/en/3.0/classes/class_surfacetool.html" target="_blank" rel="noopener">SurfaceTool</a>, you can create geometry by specifying the vertices individually.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># Create a new SurfaceTool instance</span><br><span class="line">var st = SurfaceTool.new()</span><br><span class="line"></span><br><span class="line"># Begin specifying your vertices using primitive type of triangles. Every 3 vertices is a triangle.</span><br><span class="line">st.begin(Mesh.PRIMITIVE_TRIANGLES)</span><br><span class="line"></span><br><span class="line"># Half of a quad</span><br><span class="line">st.add_uv(Vector2(1,1))</span><br><span class="line">st.add_vertex(Vector3(0,0,1))</span><br><span class="line"></span><br><span class="line">st.add_uv(Vector2(1,0))</span><br><span class="line">st.add_vertex(Vector3(0,1,1))</span><br><span class="line"></span><br><span class="line">st.add_uv(Vector2(0,1))</span><br><span class="line">st.add_vertex(Vector3(1,0,1))</span><br><span class="line"></span><br><span class="line"># Output the mesh</span><br><span class="line">var mesh = st.commit()</span><br></pre></td></tr></table></figure></p><p>This is just a basic example of what you can do with SurfaceTool, but as you can see, it’s a great way to create procedural geometry. Alongside this I use some code to decide which material to use for which tile and the ability to regenerate the mesh when a tile is changed.</p><h2 id="The-Player"><a href="#The-Player" class="headerlink" title="The Player"></a>The Player</h2><p>The player is currently just a simple CapsuleMesh with a camera, a light, some raycasts and some sounds attached to it.</p><p><img src="https://i.lunasqu.ee/blog/player_scene.png" alt="Player Scene"><br>The script attached to it deals with <a href="http://docs.godotengine.org/en/3.0/classes/class_kinematicbody.html" target="_blank" rel="noopener">KinematicBody</a> movement and the block break animation. The RayCasts are used to determine whether the player is colliding with the chunk or not. The RayCast pointing up is used to cancel the jump when player hits a tile from below.</p><h2 id="The-GUI"><a href="#The-GUI" class="headerlink" title="The GUI"></a>The GUI</h2><p><img src="https://i.lunasqu.ee/blog/gui.png" alt="GUI Scene"><br>GUI in Godot is created using the <a href="http://docs.godotengine.org/en/3.0/classes/class_control.html" target="_blank" rel="noopener">Control</a> class and it’s inherited classes.<br>In the GUI scene I have a simple <a href="http://docs.godotengine.org/en/3.0/classes/class_itemlist.html" target="_blank" rel="noopener">ItemList</a> inventory and a few other items. The main thing the GUI does is the shop: buy and sell system.</p><p><img src="https://i.lunasqu.ee/blog/shop.png" alt="The Shop Dialog"></p><p>On the righthand side, there are two image buttons that spawn an instance of another scene and translate it to the player’s current position. These two buttons are Bomb and Torch, which “place” their respective item.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Load the scene</span><br><span class="line">var scene = load(&quot;res://scene/props/bomb.tscn&quot;)</span><br><span class="line"></span><br><span class="line"># Get the root instance of the scene, in this case it&apos;s a Spatial</span><br><span class="line">var node = scene.instance()</span><br><span class="line"></span><br><span class="line"># Translate the Spatial</span><br><span class="line">node.set_translation(Vector3(x, y, z))</span><br><span class="line"></span><br><span class="line"># Add it to the Root scene</span><br><span class="line">get_node(&quot;../&quot;).add_child(node)</span><br></pre></td></tr></table></figure></p><h2 id="SideSupport"><a href="#SideSupport" class="headerlink" title="SideSupport"></a>SideSupport</h2><p>This scene generates 4 quads that cover the chunk. These prevent the player from walking off of the chunk or falling out the bottom.</p><h2 id="CrackBox"><a href="#CrackBox" class="headerlink" title="CrackBox"></a>CrackBox</h2><p>This scene generates a quad that has a variable texture. This scene is used to display the breaking animation of a tile, by translating it to the currently “broken” tile and setting the Texture of the material to one of the 6 crack textures.<br><img src="https://i.lunasqu.ee/blog/crack.png" alt="The 6 textures used to represent the tile breaking"></p><h1 id="The-Source"><a href="#The-Source" class="headerlink" title="The Source"></a>The Source</h1><p>The source of this project is available <a href="https://github.com/LunaSquee/xyminer" target="_blank" rel="noopener">on my GitHub account</a>. I’ve laid out the scenes, scripts, etc. into a nice folder structure so you can easily see where the things are located. I recommend you do the same when you’re making a game in Godot. If you want to try the game yourself, you can clone or download the repository onto your computer and <strong>Import</strong> it in the project list of the editor. Downloads are not currently available as the game is still in development, but you can easily export them in the editor.</p><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>I think that Godot is a really great game engine. It lets you do amazing things quite easily. The community is also very helpful and the <a href="http://docs.godotengine.org/en/3.0/" target="_blank" rel="noopener">documentation</a> is good enough for you to get started. This game still needs work for it to be enjoyable, but it’s been quite fun getting this far and I thought I’d share it with you.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Hello!&lt;br&gt;In the past week, I’ve been working on a simple 3D game using &lt;a href=&quot;https://godotengine.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;
      
    
    </summary>
    
    
      <category term="game" scheme="https://lunasqu.ee/blog/tags/game/"/>
    
      <category term="projects" scheme="https://lunasqu.ee/blog/tags/projects/"/>
    
      <category term="godot" scheme="https://lunasqu.ee/blog/tags/godot/"/>
    
  </entry>
  
  <entry>
    <title>Welcome to my blog!</title>
    <link href="https://lunasqu.ee/blog/2018/01/26/welcome-to-my-blog/"/>
    <id>https://lunasqu.ee/blog/2018/01/26/welcome-to-my-blog/</id>
    <published>2018-01-26T16:07:45.617Z</published>
    <updated>2018-01-26T16:07:45.617Z</updated>
    
    <content type="html"><![CDATA[<p>So, I’ve decided to start a new blog using <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>.<br>I’ll probably be using this to share my projects and write some tutorials.</p><h2 id="Current-projects"><a href="#Current-projects" class="headerlink" title="Current projects"></a>Current projects</h2><p>I’m currently taking a break from writing code due to personal reasons, but I’m mainly working on my network, <a href="https://icynet.eu" target="_blank" rel="noopener">Icy Network</a>. The main project in the works is <a href="https://github.com/IcyNet/Episodes.Community" target="_blank" rel="noopener">Episodes.Community</a>, which is basically a site where people can watch and share links to their favorite TV shows and cartoons.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;So, I’ve decided to start a new blog using &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;.&lt;br&gt;I’ll probably be using 
      
    
    </summary>
    
    
      <category term="projects" scheme="https://lunasqu.ee/blog/tags/projects/"/>
    
      <category term="update" scheme="https://lunasqu.ee/blog/tags/update/"/>
    
  </entry>
  
</feed>
